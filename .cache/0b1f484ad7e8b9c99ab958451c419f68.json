{
  "dependencies": [],
  "generated": {
    "js":
      "var t={distributions:{BOX:1,SPHERE:2,DISC:3},valueOverLifetimeLength:4};\"function\"==typeof define&&define.amd?define(\"spe\",t):\"undefined\"!=typeof exports&&\"undefined\"!=typeof module&&(module.exports=t),t.TypedArrayHelper=function(t,e,r,i){\"use strict\";this.componentSize=r||1,this.size=e||1,this.TypedArrayConstructor=t||Float32Array,this.array=new t(e*this.componentSize),this.indexOffset=i||0},t.TypedArrayHelper.constructor=t.TypedArrayHelper,t.TypedArrayHelper.prototype.setSize=function(t,e){\"use strict\";var r=this.array.length;return e||(t*=this.componentSize),t<r?this.shrink(t):t>r?this.grow(t):void 0},t.TypedArrayHelper.prototype.shrink=function(t){\"use strict\";return this.array=this.array.subarray(0,t),this.size=t,this},t.TypedArrayHelper.prototype.grow=function(t){\"use strict\";var e=this.array,r=new this.TypedArrayConstructor(t);return r.set(e),this.array=r,this.size=t,this},t.TypedArrayHelper.prototype.splice=function(t,e){\"use strict\";t*=this.componentSize,e*=this.componentSize;for(var r=[],i=this.array,a=i.length,s=0;s<a;++s)(s<t||s>=e)&&r.push(i[s]);return this.setFromArray(0,r),this},t.TypedArrayHelper.prototype.setFromArray=function(t,e){\"use strict\";var r=t+e.length;return r>this.array.length?this.grow(r):r<this.array.length&&this.shrink(r),this.array.set(e,this.indexOffset+t),this},t.TypedArrayHelper.prototype.setVec2=function(t,e){\"use strict\";return this.setVec2Components(t,e.x,e.y)},t.TypedArrayHelper.prototype.setVec2Components=function(t,e,r){\"use strict\";var i=this.array,a=this.indexOffset+t*this.componentSize;return i[a]=e,i[a+1]=r,this},t.TypedArrayHelper.prototype.setVec3=function(t,e){\"use strict\";return this.setVec3Components(t,e.x,e.y,e.z)},t.TypedArrayHelper.prototype.setVec3Components=function(t,e,r,i){\"use strict\";var a=this.array,s=this.indexOffset+t*this.componentSize;return a[s]=e,a[s+1]=r,a[s+2]=i,this},t.TypedArrayHelper.prototype.setVec4=function(t,e){\"use strict\";return this.setVec4Components(t,e.x,e.y,e.z,e.w)},t.TypedArrayHelper.prototype.setVec4Components=function(t,e,r,i,a){\"use strict\";var s=this.array,o=this.indexOffset+t*this.componentSize;return s[o]=e,s[o+1]=r,s[o+2]=i,s[o+3]=a,this},t.TypedArrayHelper.prototype.setMat3=function(t,e){\"use strict\";return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements)},t.TypedArrayHelper.prototype.setMat4=function(t,e){\"use strict\";return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements)},t.TypedArrayHelper.prototype.setColor=function(t,e){\"use strict\";return this.setVec3Components(t,e.r,e.g,e.b)},t.TypedArrayHelper.prototype.setNumber=function(t,e){\"use strict\";return this.array[this.indexOffset+t*this.componentSize]=e,this},t.TypedArrayHelper.prototype.getValueAtIndex=function(t){\"use strict\";return this.array[this.indexOffset+t]},t.TypedArrayHelper.prototype.getComponentValueAtIndex=function(t){\"use strict\";return this.array.subarray(this.indexOffset+t*this.componentSize)},t.ShaderAttribute=function(e,r,i){\"use strict\";var a=t.ShaderAttribute.typeSizeMap;this.type=\"string\"==typeof e&&a.hasOwnProperty(e)?e:\"f\",this.componentSize=a[this.type],this.arrayType=i||Float32Array,this.typedArray=null,this.bufferAttribute=null,this.dynamicBuffer=!!r,this.updateMin=0,this.updateMax=0},t.ShaderAttribute.constructor=t.ShaderAttribute,t.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},t.ShaderAttribute.prototype.setUpdateRange=function(t,e){\"use strict\";this.updateMin=Math.min(t*this.componentSize,this.updateMin*this.componentSize),this.updateMax=Math.max(e*this.componentSize,this.updateMax*this.componentSize)},t.ShaderAttribute.prototype.flagUpdate=function(){\"use strict\";var t=this.bufferAttribute,e=t.updateRange;e.offset=this.updateMin,e.count=Math.min(this.updateMax-this.updateMin+this.componentSize,this.typedArray.array.length),t.needsUpdate=!0},t.ShaderAttribute.prototype.resetUpdateRange=function(){\"use strict\";this.updateMin=0,this.updateMax=0},t.ShaderAttribute.prototype.resetDynamic=function(){\"use strict\";this.bufferAttribute.dynamic=this.dynamicBuffer},t.ShaderAttribute.prototype.splice=function(t,e){\"use strict\";this.typedArray.splice(t,e),this.forceUpdateAll()},t.ShaderAttribute.prototype.forceUpdateAll=function(){\"use strict\";this.bufferAttribute.array=this.typedArray.array,this.bufferAttribute.updateRange.offset=0,this.bufferAttribute.updateRange.count=-1,this.bufferAttribute.dynamic=!1,this.bufferAttribute.needsUpdate=!0},t.ShaderAttribute.prototype._ensureTypedArray=function(e){\"use strict\";null!==this.typedArray&&this.typedArray.size===e*this.componentSize||(null!==this.typedArray&&this.typedArray.size!==e?this.typedArray.setSize(e):null===this.typedArray&&(this.typedArray=new t.TypedArrayHelper(this.arrayType,e,this.componentSize)))},t.ShaderAttribute.prototype._createBufferAttribute=function(t){\"use strict\";if(this._ensureTypedArray(t),null!==this.bufferAttribute)return this.bufferAttribute.array=this.typedArray.array,void(this.bufferAttribute.needsUpdate=!0);this.bufferAttribute=new THREE.BufferAttribute(this.typedArray.array,this.componentSize),this.bufferAttribute.dynamic=this.dynamicBuffer},t.ShaderAttribute.prototype.getLength=function(){\"use strict\";return null===this.typedArray?0:this.typedArray.array.length},t.shaderChunks={defines:[\"#define PACKED_COLOR_SIZE 256.0\",\"#define PACKED_COLOR_DIVISOR 255.0\"].join(\"\\n\"),uniforms:[\"uniform float deltaTime;\",\"uniform float runTime;\",\"uniform sampler2D texture;\",\"uniform vec4 textureAnimation;\",\"uniform float scale;\"].join(\"\\n\"),attributes:[\"attribute vec4 acceleration;\",\"attribute vec3 velocity;\",\"attribute vec4 rotation;\",\"attribute vec3 rotationCenter;\",\"attribute vec4 params;\",\"attribute vec4 size;\",\"attribute vec4 angle;\",\"attribute vec4 color;\",\"attribute vec4 opacity;\"].join(\"\\n\"),varyings:[\"varying vec4 vColor;\",\"#ifdef SHOULD_ROTATE_TEXTURE\",\"    varying float vAngle;\",\"#endif\",\"#ifdef SHOULD_CALCULATE_SPRITE\",\"    varying vec4 vSpriteSheet;\",\"#endif\"].join(\"\\n\"),branchAvoidanceFunctions:[\"float when_gt(float x, float y) {\",\"    return max(sign(x - y), 0.0);\",\"}\",\"float when_lt(float x, float y) {\",\"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );\",\"}\",\"float when_eq( float x, float y ) {\",\"    return 1.0 - abs( sign( x - y ) );\",\"}\",\"float when_ge(float x, float y) {\",\"  return 1.0 - when_lt(x, y);\",\"}\",\"float when_le(float x, float y) {\",\"  return 1.0 - when_gt(x, y);\",\"}\",\"float and(float a, float b) {\",\"    return a * b;\",\"}\",\"float or(float a, float b) {\",\"    return min(a + b, 1.0);\",\"}\"].join(\"\\n\"),unpackColor:[\"vec3 unpackColor( in float hex ) {\",\"   vec3 c = vec3( 0.0 );\",\"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\",\"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\",\"   float b = mod( hex, PACKED_COLOR_SIZE );\",\"   c.r = r / PACKED_COLOR_DIVISOR;\",\"   c.g = g / PACKED_COLOR_DIVISOR;\",\"   c.b = b / PACKED_COLOR_DIVISOR;\",\"   return c;\",\"}\"].join(\"\\n\"),unpackRotationAxis:[\"vec3 unpackRotationAxis( in float hex ) {\",\"   vec3 c = vec3( 0.0 );\",\"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\",\"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\",\"   float b = mod( hex, PACKED_COLOR_SIZE );\",\"   c.r = r / PACKED_COLOR_DIVISOR;\",\"   c.g = g / PACKED_COLOR_DIVISOR;\",\"   c.b = b / PACKED_COLOR_DIVISOR;\",\"   c *= vec3( 2.0 );\",\"   c -= vec3( 1.0 );\",\"   return c;\",\"}\"].join(\"\\n\"),floatOverLifetime:[\"float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {\",\"    highp float value = 0.0;\",\"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );\",\"    float fIndex = 0.0;\",\"    float shouldApplyValue = 0.0;\",\"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );\",\"\",\"    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {\",\"       fIndex = float( i );\",\"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );\",\"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );\",\"    }\",\"\",\"    return value;\",\"}\"].join(\"\\n\"),colorOverLifetime:[\"vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {\",\"    vec3 value = vec3( 0.0 );\",\"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );\",\"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );\",\"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );\",\"    return value;\",\"}\"].join(\"\\n\"),paramFetchingFunctions:[\"float getAlive() {\",\"   return params.x;\",\"}\",\"float getAge() {\",\"   return params.y;\",\"}\",\"float getMaxAge() {\",\"   return params.z;\",\"}\",\"float getWiggle() {\",\"   return params.w;\",\"}\"].join(\"\\n\"),forceFetchingFunctions:[\"vec4 getPosition( in float age ) {\",\"   return modelViewMatrix * vec4( position, 1.0 );\",\"}\",\"vec3 getVelocity( in float age ) {\",\"   return velocity * age;\",\"}\",\"vec3 getAcceleration( in float age ) {\",\"   return acceleration.xyz * age;\",\"}\"].join(\"\\n\"),rotationFunctions:[\"#ifdef SHOULD_ROTATE_PARTICLES\",\"   mat4 getRotationMatrix( in vec3 axis, in float angle) {\",\"       axis = normalize(axis);\",\"       float s = sin(angle);\",\"       float c = cos(angle);\",\"       float oc = 1.0 - c;\",\"\",\"       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\",\"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\",\"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\",\"                   0.0,                                0.0,                                0.0,                                1.0);\",\"   }\",\"\",\"   vec3 getRotation( in vec3 pos, in float positionInTime ) {\",\"      if( rotation.y == 0.0 ) {\",\"           return pos;\",\"      }\",\"\",\"      vec3 axis = unpackRotationAxis( rotation.x );\",\"      vec3 center = rotationCenter;\",\"      vec3 translated;\",\"      mat4 rotationMatrix;\",\"      float angle = 0.0;\",\"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;\",\"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );\",\"      translated = rotationCenter - pos;\",\"      rotationMatrix = getRotationMatrix( axis, angle );\",\"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );\",\"   }\",\"#endif\"].join(\"\\n\"),rotateTexture:[\"    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );\",\"\",\"    #ifdef SHOULD_ROTATE_TEXTURE\",\"       float x = gl_PointCoord.x - 0.5;\",\"       float y = 1.0 - gl_PointCoord.y - 0.5;\",\"       float c = cos( -vAngle );\",\"       float s = sin( -vAngle );\",\"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );\",\"    #endif\",\"\",\"    #ifdef SHOULD_CALCULATE_SPRITE\",\"        float framesX = vSpriteSheet.x;\",\"        float framesY = vSpriteSheet.y;\",\"        float columnNorm = vSpriteSheet.z;\",\"        float rowNorm = vSpriteSheet.w;\",\"        vUv.x = gl_PointCoord.x * framesX + columnNorm;\",\"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);\",\"    #endif\",\"\",\"    vec4 rotatedTexture = texture2D( texture, vUv );\"].join(\"\\n\")},t.shaders={vertex:[t.shaderChunks.defines,t.shaderChunks.uniforms,t.shaderChunks.attributes,t.shaderChunks.varyings,THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,THREE.ShaderChunk.fog_pars_vertex,t.shaderChunks.branchAvoidanceFunctions,t.shaderChunks.unpackColor,t.shaderChunks.unpackRotationAxis,t.shaderChunks.floatOverLifetime,t.shaderChunks.colorOverLifetime,t.shaderChunks.paramFetchingFunctions,t.shaderChunks.forceFetchingFunctions,t.shaderChunks.rotationFunctions,\"void main() {\",\"    highp float age = getAge();\",\"    highp float alive = getAlive();\",\"    highp float maxAge = getMaxAge();\",\"    highp float positionInTime = (age / maxAge);\",\"    highp float isAlive = when_gt( alive, 0.0 );\",\"    #ifdef SHOULD_WIGGLE_PARTICLES\",\"        float wiggleAmount = positionInTime * getWiggle();\",\"        float wiggleSin = isAlive * sin( wiggleAmount );\",\"        float wiggleCos = isAlive * cos( wiggleAmount );\",\"    #endif\",\"    vec3 vel = getVelocity( age );\",\"    vec3 accel = getAcceleration( age );\",\"    vec3 force = vec3( 0.0 );\",\"    vec3 pos = vec3( position );\",\"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;\",\"    force += vel;\",\"    force *= drag;\",\"    force += accel * age;\",\"    pos += force;\",\"    #ifdef SHOULD_WIGGLE_PARTICLES\",\"        pos.x += wiggleSin;\",\"        pos.y += wiggleCos;\",\"        pos.z += wiggleSin;\",\"    #endif\",\"    #ifdef SHOULD_ROTATE_PARTICLES\",\"        pos = getRotation( pos, positionInTime );\",\"    #endif\",\"    vec4 mvPos = modelViewMatrix * vec4( pos, 1.0 );\",\"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;\",\"    #ifdef HAS_PERSPECTIVE\",\"        float perspective = scale / length( mvPos.xyz );\",\"    #else\",\"        float perspective = 1.0;\",\"    #endif\",\"    float pointSizePerspective = pointSize * perspective;\",\"    #ifdef COLORIZE\",\"       vec3 c = isAlive * getColorOverLifetime(\",\"           positionInTime,\",\"           unpackColor( color.x ),\",\"           unpackColor( color.y ),\",\"           unpackColor( color.z ),\",\"           unpackColor( color.w )\",\"       );\",\"    #else\",\"       vec3 c = vec3(1.0);\",\"    #endif\",\"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );\",\"    vColor = vec4( c, o );\",\"    #ifdef SHOULD_ROTATE_TEXTURE\",\"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );\",\"    #endif\",\"    #ifdef SHOULD_CALCULATE_SPRITE\",\"        float framesX = textureAnimation.x;\",\"        float framesY = textureAnimation.y;\",\"        float loopCount = textureAnimation.w;\",\"        float totalFrames = textureAnimation.z;\",\"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );\",\"        float column = floor(mod( frameNumber, framesX ));\",\"        float row = floor( (frameNumber - column) / framesX );\",\"        float columnNorm = column / framesX;\",\"        float rowNorm = row / framesY;\",\"        vSpriteSheet.x = 1.0 / framesX;\",\"        vSpriteSheet.y = 1.0 / framesY;\",\"        vSpriteSheet.z = columnNorm;\",\"        vSpriteSheet.w = rowNorm;\",\"    #endif\",\"    gl_PointSize = pointSizePerspective;\",\"    gl_Position = projectionMatrix * mvPos;\",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.fog_vertex,\"}\"].join(\"\\n\"),fragment:[t.shaderChunks.uniforms,THREE.ShaderChunk.common,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,t.shaderChunks.varyings,t.shaderChunks.branchAvoidanceFunctions,\"void main() {\",\"    vec3 outgoingLight = vColor.xyz;\",\"    \",\"    #ifdef ALPHATEST\",\"       if ( vColor.w < float(ALPHATEST) ) discard;\",\"    #endif\",t.shaderChunks.rotateTexture,THREE.ShaderChunk.logdepthbuf_fragment,\"    outgoingLight = vColor.xyz * rotatedTexture.xyz;\",\"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );\",THREE.ShaderChunk.fog_fragment,\"}\"].join(\"\\n\")},t.utils={types:{BOOLEAN:\"boolean\",STRING:\"string\",NUMBER:\"number\",OBJECT:\"object\"},ensureTypedArg:function(t,e,r){\"use strict\";return typeof t===e?t:r},ensureArrayTypedArg:function(t,e,r){\"use strict\";if(Array.isArray(t)){for(var i=t.length-1;i>=0;--i)if(typeof t[i]!==e)return r;return t}return this.ensureTypedArg(t,e,r)},ensureInstanceOf:function(t,e,r){\"use strict\";return void 0!==e&&t instanceof e?t:r},ensureArrayInstanceOf:function(t,e,r){\"use strict\";if(Array.isArray(t)){for(var i=t.length-1;i>=0;--i)if(void 0!==e&&t[i]instanceof e==!1)return r;return t}return this.ensureInstanceOf(t,e,r)},ensureValueOverLifetimeCompliance:function(t,e,r){\"use strict\";e=e||3,r=r||3,!1===Array.isArray(t._value)&&(t._value=[t._value]),!1===Array.isArray(t._spread)&&(t._spread=[t._spread]);var i=this.clamp(t._value.length,e,r),a=this.clamp(t._spread.length,e,r),s=Math.max(i,a);t._value.length!==s&&(t._value=this.interpolateArray(t._value,s)),t._spread.length!==s&&(t._spread=this.interpolateArray(t._spread,s))},interpolateArray:function(t,e){\"use strict\";for(var r=t.length,i=[\"function\"==typeof t[0].clone?t[0].clone():t[0]],a=(r-1)/(e-1),s=1;s<e-1;++s){var o=s*a,n=Math.floor(o),u=Math.ceil(o),p=o-n;i[s]=this.lerpTypeAgnostic(t[n],t[u],p)}return i.push(\"function\"==typeof t[r-1].clone?t[r-1].clone():t[r-1]),i},clamp:function(t,e,r){\"use strict\";return Math.max(e,Math.min(t,r))},zeroToEpsilon:function(t,e){\"use strict\";var r=t;return r=e?1e-5*Math.random()*10:1e-5,t<0&&t>-1e-5&&(r=-r),r},lerpTypeAgnostic:function(t,e,r){\"use strict\";var i,a=this.types;return typeof t===a.NUMBER&&typeof e===a.NUMBER?t+(e-t)*r:t instanceof THREE.Vector2&&e instanceof THREE.Vector2?((i=t.clone()).x=this.lerp(t.x,e.x,r),i.y=this.lerp(t.y,e.y,r),i):t instanceof THREE.Vector3&&e instanceof THREE.Vector3?((i=t.clone()).x=this.lerp(t.x,e.x,r),i.y=this.lerp(t.y,e.y,r),i.z=this.lerp(t.z,e.z,r),i):t instanceof THREE.Vector4&&e instanceof THREE.Vector4?((i=t.clone()).x=this.lerp(t.x,e.x,r),i.y=this.lerp(t.y,e.y,r),i.z=this.lerp(t.z,e.z,r),i.w=this.lerp(t.w,e.w,r),i):t instanceof THREE.Color&&e instanceof THREE.Color?((i=t.clone()).r=this.lerp(t.r,e.r,r),i.g=this.lerp(t.g,e.g,r),i.b=this.lerp(t.b,e.b,r),i):void 0},lerp:function(t,e,r){\"use strict\";return t+(e-t)*r},roundToNearestMultiple:function(t,e){\"use strict\";var r=0;return 0===e?t:0===(r=Math.abs(t)%e)?t:t<0?-(Math.abs(t)-r):t+e-r},arrayValuesAreEqual:function(t){\"use strict\";for(var e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:function(t,e){\"use strict\";return t+e*(Math.random()-.5)},randomVector3:function(t,e,r,i,a){\"use strict\";var s=r.x+(Math.random()*i.x-.5*i.x),o=r.y+(Math.random()*i.y-.5*i.y),n=r.z+(Math.random()*i.z-.5*i.z);a&&(s=.5*-a.x+this.roundToNearestMultiple(s,a.x),o=.5*-a.y+this.roundToNearestMultiple(o,a.y),n=.5*-a.z+this.roundToNearestMultiple(n,a.z)),t.typedArray.setVec3Components(e,s,o,n)},randomColor:function(t,e,r,i){\"use strict\";var a=r.r+Math.random()*i.x,s=r.g+Math.random()*i.y,o=r.b+Math.random()*i.z;a=this.clamp(a,0,1),s=this.clamp(s,0,1),o=this.clamp(o,0,1),t.typedArray.setVec3Components(e,a,s,o)},randomColorAsHex:function(){\"use strict\";var t=new THREE.Color;return function(e,r,i,a){for(var s=i.length,o=[],n=0;n<s;++n){var u=a[n];t.copy(i[n]),t.r+=Math.random()*u.x-.5*u.x,t.g+=Math.random()*u.y-.5*u.y,t.b+=Math.random()*u.z-.5*u.z,t.r=this.clamp(t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this.clamp(t.b,0,1),o.push(t.getHex())}e.typedArray.setVec4Components(r,o[0],o[1],o[2],o[3])}}(),randomVector3OnSphere:function(t,e,r,i,a,s,o,n){\"use strict\";var u=2*Math.random()-1,p=6.2832*Math.random(),l=Math.sqrt(1-u*u),c=this.randomFloat(i,a),h=0,d=0,f=0;o&&(c=Math.round(c/o)*o),h=l*Math.cos(p)*c,d=l*Math.sin(p)*c,f=u*c,h*=s.x,d*=s.y,f*=s.z,h+=r.x,d+=r.y,f+=r.z,t.typedArray.setVec3Components(e,h,d,f)},seededRandom:function(t){var e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc:function(t,e,r,i,a,s,o){\"use strict\";var n=6.2832*Math.random(),u=Math.abs(this.randomFloat(i,a)),p=0,l=0,c=0;o&&(u=Math.round(u/o)*o),p=Math.cos(n)*u,l=Math.sin(n)*u,p*=s.x,l*=s.y,p+=r.x,l+=r.y,c+=r.z,t.typedArray.setVec3Components(e,p,l,c)},randomDirectionVector3OnSphere:function(){\"use strict\";var t=new THREE.Vector3;return function(e,r,i,a,s,o,n,u){t.copy(o),t.x-=i,t.y-=a,t.z-=s,t.normalize().multiplyScalar(-this.randomFloat(n,u)),e.typedArray.setVec3Components(r,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){\"use strict\";var t=new THREE.Vector3;return function(e,r,i,a,s,o,n,u){t.copy(o),t.x-=i,t.y-=a,t.z-=s,t.normalize().multiplyScalar(-this.randomFloat(n,u)),e.typedArray.setVec3Components(r,t.x,t.y,0)}}(),getPackedRotationAxis:function(){\"use strict\";var t=new THREE.Vector3,e=new THREE.Vector3,r=new THREE.Color,i=new THREE.Vector3(1,1,1);return function(a,s){return t.copy(a).normalize(),e.copy(s).normalize(),t.x+=.5*-s.x+Math.random()*s.x,t.y+=.5*-s.y+Math.random()*s.y,t.z+=.5*-s.z+Math.random()*s.z,t.normalize().add(i).multiplyScalar(.5),r.setRGB(t.x,t.y,t.z),r.getHex()}}()},t.Group=function(e){\"use strict\";var r=t.utils,i=r.types;(e=r.ensureTypedArg(e,i.OBJECT,{})).texture=r.ensureTypedArg(e.texture,i.OBJECT,{}),this.uuid=THREE.Math.generateUUID(),this.fixedTimeStep=r.ensureTypedArg(e.fixedTimeStep,i.NUMBER,.016),this.texture=r.ensureInstanceOf(e.texture.value,THREE.Texture,null),this.textureFrames=r.ensureInstanceOf(e.texture.frames,THREE.Vector2,new THREE.Vector2(1,1)),this.textureFrameCount=r.ensureTypedArg(e.texture.frameCount,i.NUMBER,this.textureFrames.x*this.textureFrames.y),this.textureLoop=r.ensureTypedArg(e.texture.loop,i.NUMBER,1),this.textureFrames.max(new THREE.Vector2(1,1)),this.hasPerspective=r.ensureTypedArg(e.hasPerspective,i.BOOLEAN,!0),this.colorize=r.ensureTypedArg(e.colorize,i.BOOLEAN,!0),this.maxParticleCount=r.ensureTypedArg(e.maxParticleCount,i.NUMBER,null),this.blending=r.ensureTypedArg(e.blending,i.NUMBER,THREE.AdditiveBlending),this.transparent=r.ensureTypedArg(e.transparent,i.BOOLEAN,!0),this.alphaTest=parseFloat(r.ensureTypedArg(e.alphaTest,i.NUMBER,0)),this.depthWrite=r.ensureTypedArg(e.depthWrite,i.BOOLEAN,!1),this.depthTest=r.ensureTypedArg(e.depthTest,i.BOOLEAN,!0),this.fog=r.ensureTypedArg(e.fog,i.BOOLEAN,!0),this.scale=r.ensureTypedArg(e.scale,i.NUMBER,300),this.emitters=[],this.emitterIDs=[],this._pool=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={texture:{type:\"t\",value:this.texture},textureAnimation:{type:\"v4\",value:new THREE.Vector4(this.textureFrames.x,this.textureFrames.y,this.textureFrameCount,Math.max(Math.abs(this.textureLoop),1))},fogColor:{type:\"c\",value:null},fogNear:{type:\"f\",value:10},fogFar:{type:\"f\",value:200},fogDensity:{type:\"f\",value:.5},deltaTime:{type:\"f\",value:0},runTime:{type:\"f\",value:0},scale:{type:\"f\",value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:t.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this.attributes={position:new t.ShaderAttribute(\"v3\",!0),acceleration:new t.ShaderAttribute(\"v4\",!0),velocity:new t.ShaderAttribute(\"v3\",!0),rotation:new t.ShaderAttribute(\"v4\",!0),rotationCenter:new t.ShaderAttribute(\"v3\",!0),params:new t.ShaderAttribute(\"v4\",!0),size:new t.ShaderAttribute(\"v4\",!0),angle:new t.ShaderAttribute(\"v4\",!0),color:new t.ShaderAttribute(\"v4\",!0),opacity:new t.ShaderAttribute(\"v4\",!0)},this.attributeKeys=Object.keys(this.attributes),this.attributeCount=this.attributeKeys.length,this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.shaders.vertex,fragmentShader:t.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new THREE.BufferGeometry,this.mesh=new THREE.Points(this.geometry,this.material),this.maxParticleCount},t.Group.constructor=t.Group,t.Group.prototype._updateDefines=function(){\"use strict\";for(var t,e=this.emitters,r=e.length-1,i=this.defines;r>=0;--r)t=e[r],i.SHOULD_CALCULATE_SPRITE||(i.SHOULD_ROTATE_TEXTURE=i.SHOULD_ROTATE_TEXTURE||!!Math.max(Math.max.apply(null,t.angle.value),Math.max.apply(null,t.angle.spread))),i.SHOULD_ROTATE_PARTICLES=i.SHOULD_ROTATE_PARTICLES||!!Math.max(t.rotation.angle,t.rotation.angleSpread),i.SHOULD_WIGGLE_PARTICLES=i.SHOULD_WIGGLE_PARTICLES||!!Math.max(t.wiggle.value,t.wiggle.spread);this.material.needsUpdate=!0},t.Group.prototype._applyAttributesToGeometry=function(){\"use strict\";var t,e,r=this.attributes,i=this.geometry,a=i.attributes;for(var s in r)r.hasOwnProperty(s)&&(t=r[s],(e=a[s])?e.array=t.typedArray.array:i.addAttribute(s,t.bufferAttribute),t.bufferAttribute.needsUpdate=!0);this.geometry.setDrawRange(0,this.particleCount)},t.Group.prototype.addEmitter=function(e){\"use strict\";if(e instanceof t.Emitter!=!1&&!(this.emitterIDs.indexOf(e.uuid)>-1)&&null===e.group){var r=this.attributes,i=this.particleCount,a=i+e.particleCount;this.particleCount=a,null!==this.maxParticleCount&&(this.particleCount,this.maxParticleCount),e._calculatePPSValue(e.maxAge._value+e.maxAge._spread),e._setBufferUpdateRanges(this.attributeKeys),e._setAttributeOffset(i),e.group=this,e.attributes=this.attributes;for(var s in r)r.hasOwnProperty(s)&&r[s]._createBufferAttribute(null!==this.maxParticleCount?this.maxParticleCount:this.particleCount);for(var o=i;o<a;++o)e._assignPositionValue(o),e._assignForceValue(o,\"velocity\"),e._assignForceValue(o,\"acceleration\"),e._assignAbsLifetimeValue(o,\"opacity\"),e._assignAbsLifetimeValue(o,\"size\"),e._assignAngleValue(o),e._assignRotationValue(o),e._assignParamsValue(o),e._assignColorValue(o);return this._applyAttributesToGeometry(),this.emitters.push(e),this.emitterIDs.push(e.uuid),this._updateDefines(e),this.material.needsUpdate=!0,this.geometry.needsUpdate=!0,this._attributesNeedRefresh=!0,this}},t.Group.prototype.removeEmitter=function(e){\"use strict\";var r=this.emitterIDs.indexOf(e.uuid);if(e instanceof t.Emitter!=!1&&-1!==r){for(var i=e.attributeOffset,a=i+e.particleCount,s=this.attributes.params.typedArray,o=i;o<a;++o)s.array[4*o]=0,s.array[4*o+1]=0;this.emitters.splice(r,1),this.emitterIDs.splice(r,1);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&this.attributes[n].splice(i,a);this.particleCount-=e.particleCount,e._onRemove(),this._attributesNeedRefresh=!0}},t.Group.prototype.getFromPool=function(){\"use strict\";var e=this._pool,r=this._createNewWhenPoolEmpty;return e.length?e.pop():r?new t.Emitter(this._poolCreationSettings):null},t.Group.prototype.releaseIntoPool=function(e){\"use strict\";if(e instanceof t.Emitter!=!1)return e.reset(),this._pool.unshift(e),this},t.Group.prototype.getPool=function(){\"use strict\";return this._pool},t.Group.prototype.addPool=function(e,r,i){\"use strict\";var a;this._poolCreationSettings=r,this._createNewWhenPoolEmpty=!!i;for(var s=0;s<e;++s)a=Array.isArray(r)?new t.Emitter(r[s]):new t.Emitter(r),this.addEmitter(a),this.releaseIntoPool(a);return this},t.Group.prototype._triggerSingleEmitter=function(t){\"use strict\";var e=this.getFromPool(),r=this;if(null!==e)return t instanceof THREE.Vector3&&(e.position.value.copy(t),e.position.value=e.position.value),e.enable(),setTimeout(function(){e.disable(),r.releaseIntoPool(e)},1e3*Math.max(e.duration,e.maxAge.value+e.maxAge.spread)),this},t.Group.prototype.triggerPoolEmitter=function(t,e){\"use strict\";if(\"number\"==typeof t&&t>1)for(var r=0;r<t;++r)this._triggerSingleEmitter(e);else this._triggerSingleEmitter(e);return this},t.Group.prototype._updateUniforms=function(t){\"use strict\";this.uniforms.runTime.value+=t,this.uniforms.deltaTime.value=t},t.Group.prototype._resetBufferRanges=function(){\"use strict\";for(var t=this.attributeKeys,e=this.attributeCount-1,r=this.attributes;e>=0;--e)r[t[e]].resetUpdateRange()},t.Group.prototype._updateBuffers=function(t){\"use strict\";for(var e,r,i,a=this.attributeKeys,s=this.attributeCount-1,o=this.attributes,n=t.bufferUpdateRanges;s>=0;--s)r=n[e=a[s]],(i=o[e]).setUpdateRange(r.min,r.max),i.flagUpdate()},t.Group.prototype.tick=function(t){\"use strict\";var e=this.emitters,r=e.length,i=t||this.fixedTimeStep,a=this.attributeKeys,s=this.attributes;if(this._updateUniforms(i),this._resetBufferRanges(),0!==r||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var o,n=0;n<r;++n)(o=e[n]).tick(i),this._updateBuffers(o);if(!0===this._attributesNeedDynamicReset){for(n=this.attributeCount-1;n>=0;--n)s[a[n]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(n=this.attributeCount-1;n>=0;--n)s[a[n]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},t.Group.prototype.dispose=function(){\"use strict\";return this.geometry.dispose(),this.material.dispose(),this},t.Emitter=function(e){\"use strict\";var r=t.utils,i=r.types,a=t.valueOverLifetimeLength;(e=r.ensureTypedArg(e,i.OBJECT,{})).position=r.ensureTypedArg(e.position,i.OBJECT,{}),e.velocity=r.ensureTypedArg(e.velocity,i.OBJECT,{}),e.acceleration=r.ensureTypedArg(e.acceleration,i.OBJECT,{}),e.radius=r.ensureTypedArg(e.radius,i.OBJECT,{}),e.drag=r.ensureTypedArg(e.drag,i.OBJECT,{}),e.rotation=r.ensureTypedArg(e.rotation,i.OBJECT,{}),e.color=r.ensureTypedArg(e.color,i.OBJECT,{}),e.opacity=r.ensureTypedArg(e.opacity,i.OBJECT,{}),e.size=r.ensureTypedArg(e.size,i.OBJECT,{}),e.angle=r.ensureTypedArg(e.angle,i.OBJECT,{}),e.wiggle=r.ensureTypedArg(e.wiggle,i.OBJECT,{}),e.maxAge=r.ensureTypedArg(e.maxAge,i.OBJECT,{}),e.onParticleSpawn,this.uuid=THREE.Math.generateUUID(),this.type=r.ensureTypedArg(e.type,i.NUMBER,t.distributions.BOX),this.position={_value:r.ensureInstanceOf(e.position.value,THREE.Vector3,new THREE.Vector3),_spread:r.ensureInstanceOf(e.position.spread,THREE.Vector3,new THREE.Vector3),_spreadClamp:r.ensureInstanceOf(e.position.spreadClamp,THREE.Vector3,new THREE.Vector3),_distribution:r.ensureTypedArg(e.position.distribution,i.NUMBER,this.type),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1),_radius:r.ensureTypedArg(e.position.radius,i.NUMBER,10),_radiusScale:r.ensureInstanceOf(e.position.radiusScale,THREE.Vector3,new THREE.Vector3(1,1,1)),_distributionClamp:r.ensureTypedArg(e.position.distributionClamp,i.NUMBER,0)},this.velocity={_value:r.ensureInstanceOf(e.velocity.value,THREE.Vector3,new THREE.Vector3),_spread:r.ensureInstanceOf(e.velocity.spread,THREE.Vector3,new THREE.Vector3),_distribution:r.ensureTypedArg(e.velocity.distribution,i.NUMBER,this.type),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.acceleration={_value:r.ensureInstanceOf(e.acceleration.value,THREE.Vector3,new THREE.Vector3),_spread:r.ensureInstanceOf(e.acceleration.spread,THREE.Vector3,new THREE.Vector3),_distribution:r.ensureTypedArg(e.acceleration.distribution,i.NUMBER,this.type),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.drag={_value:r.ensureTypedArg(e.drag.value,i.NUMBER,0),_spread:r.ensureTypedArg(e.drag.spread,i.NUMBER,0),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.wiggle={_value:r.ensureTypedArg(e.wiggle.value,i.NUMBER,0),_spread:r.ensureTypedArg(e.wiggle.spread,i.NUMBER,0)},this.rotation={_axis:r.ensureInstanceOf(e.rotation.axis,THREE.Vector3,new THREE.Vector3(0,1,0)),_axisSpread:r.ensureInstanceOf(e.rotation.axisSpread,THREE.Vector3,new THREE.Vector3),_angle:r.ensureTypedArg(e.rotation.angle,i.NUMBER,0),_angleSpread:r.ensureTypedArg(e.rotation.angleSpread,i.NUMBER,0),_static:r.ensureTypedArg(e.rotation.static,i.BOOLEAN,!1),_center:r.ensureInstanceOf(e.rotation.center,THREE.Vector3,this.position._value.clone()),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.maxAge={_value:r.ensureTypedArg(e.maxAge.value,i.NUMBER,2),_spread:r.ensureTypedArg(e.maxAge.spread,i.NUMBER,0)},this.color={_value:r.ensureArrayInstanceOf(e.color.value,THREE.Color,new THREE.Color),_spread:r.ensureArrayInstanceOf(e.color.spread,THREE.Vector3,new THREE.Vector3),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.opacity={_value:r.ensureArrayTypedArg(e.opacity.value,i.NUMBER,1),_spread:r.ensureArrayTypedArg(e.opacity.spread,i.NUMBER,0),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.size={_value:r.ensureArrayTypedArg(e.size.value,i.NUMBER,1),_spread:r.ensureArrayTypedArg(e.size.spread,i.NUMBER,0),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.angle={_value:r.ensureArrayTypedArg(e.angle.value,i.NUMBER,0),_spread:r.ensureArrayTypedArg(e.angle.spread,i.NUMBER,0),_randomise:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)},this.particleCount=r.ensureTypedArg(e.particleCount,i.NUMBER,100),this.duration=r.ensureTypedArg(e.duration,i.NUMBER,null),this.isStatic=r.ensureTypedArg(e.isStatic,i.BOOLEAN,!1),this.activeMultiplier=r.ensureTypedArg(e.activeMultiplier,i.NUMBER,1),this.direction=r.ensureTypedArg(e.direction,i.NUMBER,1),this.alive=r.ensureTypedArg(e.alive,i.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this.attributeOffset=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.resetFlags={position:r.ensureTypedArg(e.position.randomise,i.BOOLEAN,!1)||r.ensureTypedArg(e.radius.randomise,i.BOOLEAN,!1),velocity:r.ensureTypedArg(e.velocity.randomise,i.BOOLEAN,!1),acceleration:r.ensureTypedArg(e.acceleration.randomise,i.BOOLEAN,!1)||r.ensureTypedArg(e.drag.randomise,i.BOOLEAN,!1),rotation:r.ensureTypedArg(e.rotation.randomise,i.BOOLEAN,!1),rotationCenter:r.ensureTypedArg(e.rotation.randomise,i.BOOLEAN,!1),size:r.ensureTypedArg(e.size.randomise,i.BOOLEAN,!1),color:r.ensureTypedArg(e.color.randomise,i.BOOLEAN,!1),opacity:r.ensureTypedArg(e.opacity.randomise,i.BOOLEAN,!1),angle:r.ensureTypedArg(e.angle.randomise,i.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:\"params\",position:\"position\",velocity:\"velocity\",acceleration:\"acceleration\",drag:\"acceleration\",wiggle:\"params\",rotation:\"rotation\",size:\"size\",color:\"color\",opacity:\"opacity\",angle:\"angle\"};for(var s in this.updateMap)this.updateMap.hasOwnProperty(s)&&(this.updateCounts[this.updateMap[s]]=0,this.updateFlags[this.updateMap[s]]=!1,this._createGetterSetters(this[s],s));this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,r.ensureValueOverLifetimeCompliance(this.color,a,a),r.ensureValueOverLifetimeCompliance(this.opacity,a,a),r.ensureValueOverLifetimeCompliance(this.size,a,a),r.ensureValueOverLifetimeCompliance(this.angle,a,a)},t.Emitter.constructor=t.Emitter,t.Emitter.prototype._createGetterSetters=function(e,r){\"use strict\";var i=this;for(var a in e)if(e.hasOwnProperty(a)){var s=a.replace(\"_\",\"\");Object.defineProperty(e,s,{get:function(t){return function(){return this[t]}}(a),set:function(e){return function(a){var s=i.updateMap[r],o=this[e],n=t.valueOverLifetimeLength;\"_rotationCenter\"===e?(i.updateFlags.rotationCenter=!0,i.updateCounts.rotationCenter=0):\"_randomise\"===e?i.resetFlags[s]=a:(i.updateFlags[s]=!0,i.updateCounts[s]=0),i.group._updateDefines(),this[e]=a,Array.isArray(o)&&t.utils.ensureValueOverLifetimeCompliance(i[r],n,n)}}(a)})}},t.Emitter.prototype._setBufferUpdateRanges=function(t){\"use strict\";this.attributeKeys=t,this.attributeCount=t.length;for(var e=this.attributeCount-1;e>=0;--e)this.bufferUpdateRanges[t[e]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},t.Emitter.prototype._calculatePPSValue=function(t){\"use strict\";var e=this.particleCount;this.duration?this.particlesPerSecond=e/(t<this.duration?t:this.duration):this.particlesPerSecond=e/t},t.Emitter.prototype._setAttributeOffset=function(t){this.attributeOffset=t,this.activationIndex=t,this.activationEnd=t+this.particleCount},t.Emitter.prototype._assignValue=function(t,e){\"use strict\";switch(t){case\"position\":this._assignPositionValue(e);break;case\"velocity\":case\"acceleration\":this._assignForceValue(e,t);break;case\"size\":case\"opacity\":this._assignAbsLifetimeValue(e,t);break;case\"angle\":this._assignAngleValue(e);break;case\"params\":this._assignParamsValue(e);break;case\"rotation\":this._assignRotationValue(e);break;case\"color\":this._assignColorValue(e)}},t.Emitter.prototype._assignPositionValue=function(e){\"use strict\";var r=t.distributions,i=t.utils,a=this.position,s=this.attributes.position,o=a._value,n=a._spread;switch(a._distribution){case r.BOX:i.randomVector3(s,e,o,n,a._spreadClamp);break;case r.SPHERE:i.randomVector3OnSphere(s,e,o,a._radius,a._spread.x,a._radiusScale,a._spreadClamp.x,a._distributionClamp||this.particleCount);break;case r.DISC:i.randomVector3OnDisc(s,e,o,a._radius,a._spread.x,a._radiusScale,a._spreadClamp.x)}},t.Emitter.prototype._assignForceValue=function(e,r){\"use strict\";var i,a,s,o,n,u=t.distributions,p=t.utils,l=this[r],c=l._value,h=l._spread;switch(l._distribution){case u.BOX:p.randomVector3(this.attributes[r],e,c,h);break;case u.SPHERE:a=(i=this.attributes.position.typedArray.array)[n=3*e],s=i[n+1],o=i[n+2],p.randomDirectionVector3OnSphere(this.attributes[r],e,a,s,o,this.position._value,l._value.x,l._spread.x);break;case u.DISC:a=(i=this.attributes.position.typedArray.array)[n=3*e],s=i[n+1],o=i[n+2],p.randomDirectionVector3OnDisc(this.attributes[r],e,a,s,o,this.position._value,l._value.x,l._spread.x)}if(\"acceleration\"===r){var d=p.clamp(p.randomFloat(this.drag._value,this.drag._spread),0,1);this.attributes.acceleration.typedArray.array[4*e+3]=d}},t.Emitter.prototype._assignAbsLifetimeValue=function(e,r){\"use strict\";var i,a=this.attributes[r].typedArray,s=this[r],o=t.utils;o.arrayValuesAreEqual(s._value)&&o.arrayValuesAreEqual(s._spread)?(i=Math.abs(o.randomFloat(s._value[0],s._spread[0])),a.setVec4Components(e,i,i,i,i)):a.setVec4Components(e,Math.abs(o.randomFloat(s._value[0],s._spread[0])),Math.abs(o.randomFloat(s._value[1],s._spread[1])),Math.abs(o.randomFloat(s._value[2],s._spread[2])),Math.abs(o.randomFloat(s._value[3],s._spread[3])))},t.Emitter.prototype._assignAngleValue=function(e){\"use strict\";var r,i=this.attributes.angle.typedArray,a=this.angle,s=t.utils;s.arrayValuesAreEqual(a._value)&&s.arrayValuesAreEqual(a._spread)?(r=s.randomFloat(a._value[0],a._spread[0]),i.setVec4Components(e,r,r,r,r)):i.setVec4Components(e,s.randomFloat(a._value[0],a._spread[0]),s.randomFloat(a._value[1],a._spread[1]),s.randomFloat(a._value[2],a._spread[2]),s.randomFloat(a._value[3],a._spread[3]))},t.Emitter.prototype._assignParamsValue=function(e){\"use strict\";this.attributes.params.typedArray.setVec4Components(e,this.isStatic?1:0,0,Math.abs(t.utils.randomFloat(this.maxAge._value,this.maxAge._spread)),t.utils.randomFloat(this.wiggle._value,this.wiggle._spread))},t.Emitter.prototype._assignRotationValue=function(e){\"use strict\";this.attributes.rotation.typedArray.setVec3Components(e,t.utils.getPackedRotationAxis(this.rotation._axis,this.rotation._axisSpread),t.utils.randomFloat(this.rotation._angle,this.rotation._angleSpread),this.rotation._static?0:1),this.attributes.rotationCenter.typedArray.setVec3(e,this.rotation._center)},t.Emitter.prototype._assignColorValue=function(e){\"use strict\";t.utils.randomColorAsHex(this.attributes.color,e,this.color._value,this.color._spread)},t.Emitter.prototype._resetParticle=function(t){\"use strict\";for(var e,r,i=this.resetFlags,a=this.updateFlags,s=this.updateCounts,o=this.attributeKeys,n=this.attributeCount-1;n>=0;--n)r=a[e=o[n]],!0!==i[e]&&!0!==r||(this._assignValue(e,t),this._updateAttributeUpdateRange(e,t),!0===r&&s[e]===this.particleCount?(a[e]=!1,s[e]=0):1==r&&++s[e])},t.Emitter.prototype._updateAttributeUpdateRange=function(t,e){\"use strict\";var r=this.bufferUpdateRanges[t];r.min=Math.min(e,r.min),r.max=Math.max(e,r.max)},t.Emitter.prototype._resetBufferRanges=function(){\"use strict\";for(var t,e=this.bufferUpdateRanges,r=this.bufferUpdateKeys,i=this.bufferUpdateCount-1;i>=0;--i)e[t=r[i]].min=Number.POSITIVE_INFINITY,e[t].max=Number.NEGATIVE_INFINITY},t.Emitter.prototype._onRemove=function(){\"use strict\";this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.age=0},t.Emitter.prototype._decrementParticleCount=function(){\"use strict\";--this.activeParticleCount},t.Emitter.prototype._incrementParticleCount=function(){\"use strict\";++this.activeParticleCount},t.Emitter.prototype._checkParticleAges=function(t,e,r,i){\"use strict\";for(var a,s,o,n,u=e-1;u>=t;--u)0!==(n=r[a=4*u])&&(o=r[a+1],s=r[a+2],1===this.direction?(o+=i)>=s&&(o=0,n=0,this._decrementParticleCount()):(o-=i)<=0&&(o=s,n=0,this._decrementParticleCount()),r[a]=n,r[a+1]=o,this._updateAttributeUpdateRange(\"params\",u))},t.Emitter.prototype._activateParticles=function(t,e,r,i){\"use strict\";for(var a,s,o=this.direction,n=t;n<e;++n)0!=r[a=4*n]&&1!==this.particleCount||(this._incrementParticleCount(),r[a]=1,this._resetParticle(n),s=i*(n-t),r[a+1]=-1===o?r[a+2]-s:s,this._updateAttributeUpdateRange(\"params\",n))},t.Emitter.prototype.tick=function(t){\"use strict\";if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var e=this.attributeOffset,r=e+this.particleCount,i=this.paramsArray,a=this.particlesPerSecond*this.activeMultiplier*t,s=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(e,r,i,t),!1!==this.alive){if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this.age=0);var o=1===this.particleCount?s:0|s,n=Math.min(o+a,this.activationEnd),u=n-this.activationIndex|0,p=u>0?t/u:0;this._activateParticles(o,n,i,p),this.activationIndex+=a,this.activationIndex>r&&(this.activationIndex=e),this.age+=t}else this.age=0}},t.Emitter.prototype.reset=function(t){\"use strict\";if(this.age=0,this.alive=!1,!0===t){for(var e,r=this.attributeOffset,i=r+this.particleCount,a=this.paramsArray,s=this.attributes.params.bufferAttribute,o=i-1;o>=r;--o)a[e=4*o]=0,a[e+1]=0;s.updateRange.offset=0,s.updateRange.count=-1,s.needsUpdate=!0}return this},t.Emitter.prototype.enable=function(){\"use strict\";return this.alive=!0,this},t.Emitter.prototype.disable=function(){\"use strict\";return this.alive=!1,this},t.Emitter.prototype.remove=function(){\"use strict\";return null!==this.group&&this.group.removeEmitter(this),this};"
  },
  "hash": "b0686896111960be711bb7d8476a0427"
}
